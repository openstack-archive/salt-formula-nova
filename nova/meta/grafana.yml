dashboard:
  nova:
    format: json
    template: nova/files/grafana_dashboards/nova_influxdb.json
  hypervisor:
    format: json
    template: nova/files/grafana_dashboards/hypervisor_influxdb.json
  AutomaticMain:
    format: yaml
    base_panel: 'grafana:client:panel:service_singlestat'
    title: 'Main (autogenerated)'
    editable: true
    hideControls: false
    row:
      ost-control-plane:
        title: OpenStack Control Plane
        showTitle: true
        height: 100px
        panel:
          from-nova:
            title: Nova
            target:
              InfluxDB_target:
                column: value
                condition: ""
                dsType: "influxdb"
                fill: ""
                function: "last"
                groupBy:
                  - params:
                      - "$interval"
                    type: time
                  - params:
                      - "null"
                    type: fill
                groupby_field: ""
                interval: ""
                measurement: "cluster_status"
                policy: "default"
                query: SELECT last(value) FROM cluster_status WHERE cluster_name = 'nova-control' AND $timeFilter GROUP BY time($interval) fill(null)
                rawQuery: "False"
                refId: A
                resultFormat: "time_series"
                select:
                  -
                    - params:
                        - value
                      type: "field"
                    - params:
                        - value
                      type: "last"
                tags:
                - key: cluster_name
                  operator: "="
                  value: nova-control
      ost-data-plane:
        title: OpenStack Data Plane
        showTitle: true
        height: 100px
        panel:
          from-nova:
            title: Nova
            target:
              InfluxDB_target:
                column: value
                condition: ""
                dsType: "influxdb"
                fill: ""
                function: "last"
                groupBy:
                  - params:
                      - "$interval"
                    type: time
                  - params:
                      - "null"
                    type: fill
                groupby_field: ""
                interval: ""
                measurement: "cluster_status"
                policy: "default"
                query: SELECT last(value) FROM cluster_status WHERE cluster_name = 'nova-data' AND $timeFilter GROUP BY time($interval) fill(null)
                rawQuery: "False"
                refId: A
                resultFormat: "time_series"
                select:
                  -
                    - params:
                        - value
                      type: "field"
                    - params:
                        - value
                      type: "last"
                tags:
                - key: cluster_name
                  operator: "="
                  value: nova-data
